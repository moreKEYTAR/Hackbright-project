{% extends 'base.html' %}

{% block content %}

<!-- how do we validate for login before the page loads? how do we make the url change to display the unique user, not users/login...the last route used...? -->
<h1>Dashboard</h1>
<p>This is the dashboard</p>


<div>
  <form action="/logout" method="POST">
  <input type='submit' id='logout-submission' value='Log Out'>
  </form>
</div>



<div>
  {% if teams_list %}

    <h3>Your Teams</h3>
    <div id="joined-teams">
    {% for team in teams_list %}
      <div> 
        <form action="/view-team" method="GET">
          <input type="hidden" name="team" value="{{ team.team_id }}">
          <input type="submit" value="{{ team.name }}">
          <p class="desc">{{ team.desc }}</p>
        </form>
      </div>   
    {% endfor %}
    </div>

  {% endif %}
</div>
<div>
  <h4>Team Invitations</h4>
    {% if not invites_list%}
    <p>No pending team invites.</P>
      <p>See your list of<a href="/ignored-teams"> ignored team invites.</p></a>
    {% else %}
      {% for invite in invites_list %}
        <div> 
          <h5>{{ invite.name }}</h5>
          <p class="desc">{{ invite.desc }}</p>
          <form action="/join-team" method="POST">
            <input type='hidden' name="team" value="{{ invite.team_id }}">
            <input type='submit' id='join-team' value='Accept Team Invite'>
          </form>
          <form action="/ignore-team-invite" method="POST">
            <input type='hidden' name="team" value="{{ invite.team_id }}">
            <input type='submit' id='ignore-team' value='Ignore Invite'>
          </form>
        </div>
      {% endfor %}
    {% endif %}
</div>

<div>
  <h4>Make a new team</h4>
  <p>make helper info like a mouseover or flash to encourage people to do 
    this and explain it is how they make boardsssssssssssssss</p>
  <br>
  New team name: <input id="new-team-name" type="text">
  Description: <input id="new-team-desc" type="text">
  <input id="make-team" type='button' value='Make a new team'>

</div>

<script src="/static/dashboard.js"></script>

{% endblock %}
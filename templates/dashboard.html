{% extends 'base.html' %}

{% block content %}

<!-- how do we validate for login before the page loads? how do we make the url change to display the unique user, not users/login...the last route used...? -->
<h1>Dashboard</h1>
<p>This is the dashboard</p>



<div>
    <p>Make a new team to start a board and add projects!</p>
    <form action="/users/{{ session['user_id'] }}/new-team" method="GET">
    <input type='submit' id='form-submission' value='Make a new team'>
    </form>
</div>


<div>
    <form action="/users/{{ session['user_id'] }}/logout" method="POST">
    <input type='submit' id='logout-submission' value='Log Out'>
    </form>
</div>
<div>
    {% if teams_list %}
    <div>

        <h3>Your Teams</h3>

        {% for team in teams_list %}
            {% if team.is_member %}
            <div> 
                <a href="/users/{{ session['user_id'] }}/{{ team.team_id }}">
                    <h4>{{ team.name }}</h4></a>
                <p class="desc">{{ team.desc }}</p>
            </div>
            {% endif %}
           
        {% endfor %}
    </div>

    <div>
        <h3>Team Invitations</h3>
        {% for team in teams_list %}
            {% if not team.is_member %}
            
            <div> 
                <h4>{{ team.name }}</h4>
                <p class="desc">{{ team.desc }}</p>
                <form action="/users/{{ session['user_id'] }}/join-team-{{ team.team_id }}" 
                      method="POST">
                <input type='submit' id='join-team' value='Accept Team Invite'>
                </form>
                <form action="/users/{{ session['user_id'] }}/ignore-invite-{{ team.team_id }}" 
                      method="POST">
                <input type='submit' id='ignore-team' value='Ignore Invite'>
                </form>
            </div>
            {% endif %}
        {% endfor %}

    </div>
    {% endif %}
</div>
{% endblock %}